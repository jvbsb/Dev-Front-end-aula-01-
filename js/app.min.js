import{setupSPALinks}from"./spa.js";import{createProjectCard}from"./templates.js";import{setupFormValidation}from"./validation.js";import{setupDarkModeToggle}from"./theme.js";const projectsData=[{title:"Distribuição de Cestas",description:"Campanha mensal de entrega de alimentos a famílias carentes.",imageUrl:"img/entrega-cesta-basica.jpg",altText:"Voluntários entregando cestas",category:"Emergencial",link:"#projeto-1"}],renderProjects=()=>{const e=document.getElementById("projects-container");if(e){const t=projectsData.map((e=>createProjectCard(e))).join("");e.innerHTML=t}},init=()=>{console.log("Aplicação Front-End SPA e Modular Iniciada!"),setupSPALinks(),renderProjects(),setupFormValidation(),setupDarkModeToggle()};document.addEventListener("DOMContentLoaded",init);let appContainer=null;export const loadPage=async e=>{if(appContainer||(appContainer=document.getElementById("app-container")),appContainer)try{const t=await fetch(e);if(!t.ok)throw new Error(`Erro ao carregar a página: ${t.status}`);const o=await t.text(),r=document.createElement("div");r.innerHTML=o;const a=r.querySelector("#app-container").innerHTML;appContainer.innerHTML=a,history.pushState(null,"",e)}catch(e){console.error("Falha ao carregar o conteúdo SPA:",e),appContainer.innerHTML='<div class="alert alert-danger">Não foi possível carregar o conteúdo.</div>'}else console.error("ERRO CRÍTICO SPA: Elemento #app-container não encontrado no DOM.")};const navLinks=document.querySelectorAll("#main-nav a");navLinks.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href");loadPage(o)}))}));const toggleButton=document.createElement("button");toggleButton.textContent="Modo Escuro",toggleButton.classList.add("btn","theme-toggle"),toggleButton.setAttribute("aria-label","Alternar tema de alto contraste");const header=document.querySelector("header");header&&header.insertBefore(toggleButton,header.querySelector("#main-nav")||null),toggleButton.addEventListener("click",(()=>{document.body.classList.toggle("dark-mode");const e=document.body.classList.contains("dark-mode");localStorage.setItem("theme",e?"dark":"light"),toggleButton.textContent=e?"Modo Claro":"Modo Escuro"}));const savedTheme=localStorage.getItem("theme");"dark"===savedTheme&&(document.body.classList.add("dark-mode"),toggleButton.textContent="Modo Claro");const displayError=(e,t)=>{e.classList.add("input-error");let o=e.nextElementSibling;o&&o.classList.contains("error-message")||(o=document.createElement("p"),o.classList.add("error-message"),e.parentNode.insertBefore(o,e.nextSibling)),o.textContent=t},clearError=e=>{e.classList.remove("input-error");const t=e.nextElementSibling;t&&t.classList.contains("error-message")&&t.remove()},validateEmail=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),validateCPF=e=>11===e.replace(/\D/g,"").length,validateForm=e=>{e.preventDefault();let t=!0;const o=e.target,r=o.querySelector("#email"),a=o.querySelector("#cpf"),n=o.querySelector("#telefone");var s;clearError(r),s=r.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(displayError(r,"Por favor, insira um e-mail válido."),t=!1),clearError(a),11!==a.value.replace(/\D/g,"").length&&(displayError(a,"O CPF deve conter exatamente 11 dígitos numéricos."),t=!1),clearError(n),n.value.replace(/\D/g,"").length<8&&(displayError(n,"O telefone parece incompleto."),t=!1),t&&(alert("Formulário enviado com sucesso! (Simulação)"),o.reset())},form=document.querySelector("form");form&&form.addEventListener("submit",validateForm);